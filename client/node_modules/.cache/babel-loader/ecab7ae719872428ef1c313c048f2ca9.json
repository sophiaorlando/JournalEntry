{"ast":null,"code":"import _slicedToArray from \"/Users/apple/ucla-la-fsf-pt-06-2020-u-c/20.week/03.day/22-Stu_Mini_Project/Solved/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/apple/ucla-la-fsf-pt-06-2020-u-c/20.week/03.day/22-Stu_Mini_Project/Solved/client/src/components/PostsList/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { ListItem, List } from \"../List\";\nimport DeleteBtn from \"../DeleteBtn\";\nimport { Link } from \"react-router-dom\";\nimport { useStoreContext } from \"../../utils/GlobalState\";\nimport { REMOVE_POST, UPDATE_POSTS, LOADING } from \"../../utils/actions\";\nimport API from \"../../utils/API\";\n\nfunction PostsList() {\n  var _this = this;\n\n  var _useStoreContext = useStoreContext(),\n      _useStoreContext2 = _slicedToArray(_useStoreContext, 2),\n      state = _useStoreContext2[0],\n      dispatch = _useStoreContext2[1];\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      toggle = _useState2[0],\n      setToggle = _useState2[1];\n\n  var removePost = function removePost(id) {\n    API.deletePost(id).then(function () {\n      dispatch({\n        type: REMOVE_POST,\n        _id: id\n      });\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n\n  var getPosts = function getPosts() {\n    dispatch({\n      type: LOADING\n    });\n    API.getPosts().then(function (results) {\n      dispatch({\n        type: UPDATE_POSTS,\n        posts: results.data\n      });\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n\n  useEffect(function () {\n    getPosts();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, \"All Blog Posts\"), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"mb-5 mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, \"Click on a post to view\"), state.posts.length ? /*#__PURE__*/React.createElement(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, state.posts.map(function (post) {\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: post._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/posts/\" + post._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }\n    }, post.title, \" by \", post.author)), /*#__PURE__*/React.createElement(DeleteBtn, {\n      onClick: function onClick() {\n        return removePost(post._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 15\n      }\n    }));\n  })) : /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, \"You haven't added any posts yet!\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"favorites\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, \"View favorites\")));\n}\n\nexport default PostsList;","map":{"version":3,"sources":["/Users/apple/ucla-la-fsf-pt-06-2020-u-c/20.week/03.day/22-Stu_Mini_Project/Solved/client/src/components/PostsList/index.js"],"names":["React","useEffect","useState","ListItem","List","DeleteBtn","Link","useStoreContext","REMOVE_POST","UPDATE_POSTS","LOADING","API","PostsList","state","dispatch","toggle","setToggle","removePost","id","deletePost","then","type","_id","catch","err","console","log","getPosts","results","posts","data","length","map","post","title","author"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { ListItem, List } from \"../List\";\nimport DeleteBtn from \"../DeleteBtn\";\nimport { Link } from \"react-router-dom\";\nimport { useStoreContext } from \"../../utils/GlobalState\";\nimport { REMOVE_POST, UPDATE_POSTS, LOADING } from \"../../utils/actions\";\nimport API from \"../../utils/API\";\n\nfunction PostsList() {\n  const [state, dispatch] = useStoreContext();\n  const [toggle, setToggle] = useState(true)\n\n  const removePost = id => {\n    API.deletePost(id)\n      .then(() => {\n        dispatch({\n          type: REMOVE_POST,\n          _id: id\n        });\n      })\n      .catch(err => console.log(err));\n  };\n\n  const getPosts = () => {\n    dispatch({ type: LOADING });\n    API.getPosts()\n      .then(results => {\n        dispatch({\n          type: UPDATE_POSTS,\n          posts: results.data\n        });\n      })\n      .catch(err => console.log(err));\n  };\n\n  useEffect(() => {\n    getPosts();\n  }, []);\n\n  return (\n    <div>\n      <h1>All Blog Posts</h1>\n      <h3 className=\"mb-5 mt-5\">Click on a post to view</h3>\n      {state.posts.length ? (\n        <List>\n          {state.posts.map(post => (\n            <ListItem key={post._id}>\n              <Link to={\"/posts/\" + post._id}>\n                <strong>\n                  {post.title} by {post.author}\n                </strong>\n              </Link>\n              <DeleteBtn onClick={() => removePost(post._id)} />\n            </ListItem>\n          ))}\n        </List>\n      ) : (\n        <h3>You haven't added any posts yet!</h3>\n      )}\n      <div className=\"mt-5\">\n        <Link to=\"favorites\">View favorites</Link>\n      </div>\n    </div>\n  );\n}\n\nexport default PostsList;\n"]},"metadata":{},"sourceType":"module"}